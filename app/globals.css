@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Default button styles */
  .button {
    @apply inline-flex items-center px-6 py-3 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors;
  }

  .button-outline {
    @apply inline-flex items-center px-6 py-3 border border-border rounded-lg font-medium hover:bg-accent/50 transition-colors;
  }

  /* Default button hover behavior */
  button:not([class*="button"]):hover {
    @apply transition-colors duration-200;
  }

  /* Primary button hover default */
  button[class*="bg-primary"]:hover {
    @apply bg-primary/90;
  }

  /* Secondary/outline button hover default */
  button[class*="border"]:hover {
    @apply bg-accent/50;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Modern scrollbar styling */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(var(--muted));
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--muted-foreground));
  }

  /* Enhanced Sonner toast styling */
  [data-sonner-toaster] {
    z-index: 999999 !important;
  }

  [data-sonner-toast] {
    border-radius: 12px !important;
    padding: 16px 20px !important;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
    backdrop-filter: blur(8px) !important;
    font-weight: 500 !important;
  }

  [data-sonner-toast][data-type="success"] {
    background: hsl(var(--card)) !important;
    color: hsl(var(--foreground)) !important;
    border: 1px solid hsl(var(--border)) !important;
  }

  [data-sonner-toast][data-type="error"] {
    background: hsl(var(--destructive) / 0.95) !important;
    color: hsl(var(--destructive-foreground)) !important;
    border: 1px solid hsl(var(--destructive)) !important;
  }

  [data-sonner-toast] [data-description] {
    color: inherit !important;
    opacity: 0.9 !important;
    font-weight: 400 !important;
  }

  /* Dark mode specific enhancements */
  .dark [data-sonner-toast][data-type="success"] {
    background: hsl(var(--card-02)) !important;
    color: hsl(var(--foreground)) !important;
    border: 1px solid hsl(var(--border)) !important;
  }

  .dark [data-sonner-toast][data-type="error"] {
    background: hsl(var(--destructive) / 0.9) !important;
  }

  /* Override Sonner close button positioning */
  [data-sonner-toast] button[data-close-button] {
    @apply !absolute !top-2 !right-2 !left-auto !translate-x-0 !translate-y-0 !bg-transparent !border-0 !rounded-none !shadow-none !outline-none !opacity-90 hover:opacity-100 transition-opacity !font-bold !text-lg;
    color: inherit !important;
  }

  .dark [data-sonner-toast] button[data-close-button] {
    color: inherit !important;
  }

  /* Enhanced markdown content styling */
  .markdown-content ul {
    list-style-type: disc;
    padding-left: 1.5rem;
  }

  .markdown-content ul ul {
    list-style-type: circle;
    margin-top: 0.5rem;
  }

  .markdown-content ul ul ul {
    list-style-type: square;
  }

  .markdown-content ol {
    list-style-type: decimal;
    padding-left: 1.5rem;
  }

  .markdown-content ol ol {
    list-style-type: lower-alpha;
    margin-top: 0.5rem;
  }

  .markdown-content ol ol ol {
    list-style-type: lower-roman;
  }

  /* Enhanced table styling */
  .markdown-content table {
    border-spacing: 0;
    width: 100%;
  }

  .markdown-content th {
    font-weight: 600;
    background-color: hsl(var(--muted) / 0.5);
  }

  .markdown-content tr:last-child td {
    border-bottom: none;
  }

  /* Enhanced blockquote styling */
  .markdown-content blockquote {
    position: relative;
  }

  .markdown-content blockquote::before {
    position: absolute;
    left: -0.5rem;
    top: -0.25rem;
    font-size: 3rem;
    color: hsl(var(--primary) / 0.3);
    font-family: serif;
    line-height: 1;
  }

  /* Code block improvements */
  .markdown-content pre {
    position: relative;
  }

  .markdown-content pre:hover {
    box-shadow: 0 4px 12px hsl(var(--primary) / 0.1);
  }

  /* Smooth transitions for interactive elements */
  .markdown-content a,
  .markdown-content code,
  .markdown-content pre {
    transition: all 0.2s ease-in-out;
  }

  .rc-tooltip-content {
    @apply z-50;
  }
}

.custom-blockquote p:before,
.custom-blockquote p:after {
  content: none;
}

.katex-container .katex-display {
  overflow-x: auto;
  overflow-y: hidden;
  padding-bottom: 0.5rem;
}

@layer base {
  :root {
    /* Warm light theme */
    --background: 60 10% 97%; /* #F7F7F4 */
    --foreground: 47 15% 13%; /* #26251E */
    --foreground-secondary: 46 8% 22%; /* #3B3A33 */

    /* Card hierarchy */
    --card: 48 11% 93%; /* #F0EFEA */
    --card-02: 48 10% 91%; /* #EBEAE5 */
    --card-03: 48 9% 89%; /* #E6E5E0 */
    --card-04: 48 8% 87%; /* #E1E0DB */
    --card-foreground: var(--foreground);

    --popover: var(--card);
    --popover-foreground: var(--foreground);

    /* Accent - orange-red */
    --accent: 19 100% 48%; /* #F54E00 */
    --accent-foreground: 0 0% 100%;

    /* Primary uses accent */
    --primary: var(--accent);
    --primary-foreground: 0 0% 100%;

    /* Secondary */
    --secondary: var(--card-02);
    --secondary-foreground: var(--foreground);

    /* Muted */
    --muted: 45 5% 85%;
    --muted-foreground: 45 6% 13%; /* #23221E */

    /* Destructive */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    /* Borders & inputs */
    --border: 45 8% 88%;
    --input: 45 8% 88%;
    --ring: var(--accent);

    --radius: 0.5rem;

    /* Charts */
    --chart-1: var(--accent);
    --chart-2: 47 15% 13%;
    --chart-3: 19 80% 55%;
    --chart-4: 48 11% 93%;
    --chart-5: 0 84% 60%;
  }

  .dark {
    /* Warm dark theme */
    --background: 40 27% 6%; /* #14120B */
    --foreground: 0 2% 93%; /* #EDECEC */
    --foreground-secondary: 0 1% 84%; /* #D7D6D5 */

    /* Card hierarchy */
    --card: 40 14% 9%; /* #1B1913 */
    --card-02: 40 12% 11%; /* #201E18 */
    --card-03: 40 11% 13%; /* #26241E */
    --card-04: 40 10% 15%; /* #2B2923 */
    --card-foreground: var(--foreground);

    --popover: var(--card);
    --popover-foreground: var(--foreground);

    /* Accent - same orange-red */
    --accent: 19 100% 48%; /* #F54E00 */
    --accent-foreground: 0 0% 100%;

    /* Primary uses accent */
    --primary: var(--accent);
    --primary-foreground: 0 0% 100%;

    /* Secondary */
    --secondary: var(--card-02);
    --secondary-foreground: var(--foreground);

    /* Muted */
    --muted: 40 8% 20%;
    --muted-foreground: 40 2% 58%; /* #969592 */

    /* Destructive */
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    /* Borders & inputs */
    --border: 40 8% 18%;
    --input: 40 8% 18%;
    --ring: var(--accent);

    /* Charts */
    --chart-1: var(--accent);
    --chart-2: 0 2% 93%;
    --chart-3: 19 80% 55%;
    --chart-4: 40 14% 9%;
    --chart-5: 0 72% 51%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    scroll-behavior: smooth; /* Added smooth scrolling */
  }
  body {
    @apply bg-background text-foreground;
  }
}